# 컬러 팔레트 · 전역 CSS · 뱃지 인터랙션 UX 명세

> 마이페이지 컬러 팔레트 선택, 전역 CSS 연동, 뱃지 획득 화면 UX 설계

---

## 1. 컬러 팔레트 선택 기능

### 1.1 UX 적합성 판단

**결론: 자연스럽고 활용도 높은 기능**

| 장점 | 설명 |
|------|------|
| **개인화** | 사용자 취향 반영으로 서비스 애착도 상승 |
| **선행 사례** | Notion, Todoist, 인스타 등 톤 변경이 익숙한 패턴 |
| **기존 연동** | 타임테이블 팔레트 구조를 재사용 가능 |
| **점진적 적용** | 한 팔레트 = 메인/서브/라이트 3색만 전역 적용해도 충분 |

**주의점**
- 과한 색 변화는 혼란 유발 → **메인 1색 + 파생 2색**만 전역 적용하는 것이 안전
- 접근성: WCAG 대비율 유지, 채도·명도 범위 제한

---

### 1.2 컬러 팔레트 선택 위치 및 UI 흐름

#### A안: 마이페이지 상단 "테마" 진입점 (추천)

```
[마이페이지]
┌─────────────────────────────────────┐
│  [프로필] [학습현황] [달성률] ...     │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 🎨 테마 · 컬러              │   │  ← 섹션 헤더 옆 또는 카드 형태
│  │   [파스텔 ●] [기본] [차분]   │   │  ← 미리보기 견본 3~4개
│  └─────────────────────────────┘   │
│                                     │
│  [과목별 달성률] ...                 │
└─────────────────────────────────────┘
```

- **위치**: 프로필·요약 통계 아래, 과목별 달성률 위
- **표시**: 현재 선택된 팔레트 이름 + 색상 견본 3개(메인/서브/라이트)
- **진입**: 견본 탭 또는 "더보기" → 모달로 전체 팔레트 선택

#### B안: 설정 카드 내 진입

```
[마이페이지 하단]
┌─────────────────────────────────────┐
│  설정                               │
│  ┌─────────────────────────────┐   │
│  │ 컬러 테마        [파스텔 ›]  │   │  ← 설정 행 클릭 → 모달
│  │ 로그아웃                    │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

- 설정 영역에 "컬러 테마" 항목 추가
- 클릭 시 기존 타임테이블 모달과 유사한 팔레트 선택 모달

#### 제안: A안 + B안 병행

- **A**: 마이페이지 상단에 요약 카드(현재 테마 + 견본)
- **B**: 설정에 "컬러 테마" 상세 진입점
- 둘 다 같은 모달/드로어를 열어 일관된 UX 유지

---

### 1.3 UI가 과하게 변하지 않도록 하는 설계

| 원칙 | 적용 방법 |
|------|-----------|
| **변경 범위 제한** | `--brand`, `--brand-light`, `--brand-medium`만 교체 |
| **구조 유지** | 배경/테두리/텍스트는 slate 계열 고정 |
| **팔레트 단순화** | 전역용은 6~8색이 아닌 **메인 1색 + 파생 2색**만 사용 |
| **점진적 적용** | `document.documentElement.style.setProperty()`로 CSS 변수만 교체 |
| **애니메이션 최소화** | 200~300ms `transition`만 적용, 페이지 전환 없음 |

#### 팔레트 → CSS 변수 매핑 예시

```ts
// 각 팔레트별 메인/서브/라이트 3색만 정의
const GLOBAL_PALETTES = {
  default: { brand: '193 87% 40%', brandLight: '193 70% 95%', brandMedium: '193 60% 85%' },
  pastel:  { brand: '199 89% 55%', brandLight: '199 70% 95%', brandMedium: '199 60% 88%' },
  calm:    { brand: '215 25% 35%', brandLight: '215 20% 95%', brandMedium: '215 20% 88%' },
  vivid:   { brand: '199 89% 48%', brandLight: '199 70% 92%', brandMedium: '199 60% 78%' },
  // ...
};
```

- 변경 시: `--brand`, `--brand-light`, `--brand-medium`만 갱신
- 기존 `hsl(var(--brand))` 사용처는 그대로 동작

---

## 2. 전역 CSS 컬러 시스템 구조화

### 2.1 UX 관점의 역할 분리

| 역할 | CSS 변수 | 용도 | 변경 대상 |
|------|----------|------|-----------|
| **메인** | `--brand` | CTA, 선택 상태, 강조, 링 차트, 프로그레스 바 | ✅ 팔레트 |
| **서브** | `--brand-medium` | hover, 그라데이션, 보조 강조 | ✅ 팔레트 |
| **포인트** | `--brand-light` | 배경 톤, subtle highlight, 뱃지 glow | ✅ 팔레트 |
| **배경** | `--background` | 페이지 배경 | ❌ 고정(흰색) |
| **텍스트** | `--foreground`, `--muted-foreground` | 본문, 보조 | ❌ 고정(slate) |
| **테두리** | `--border` | 카드, 입력框 | ❌ 고정(slate) |

### 2.2 권장 구조

```
:root {
  /* 고정 (팔레트 변경 대상 아님) */
  --background: 0 0% 100%;
  --foreground: 215 25% 27%;
  --border: 214 32% 91%;
  --muted-foreground: 215 16% 47%;

  /* 사용자 선택 팔레트 (동적 교체) */
  --brand: 193 87% 40%;
  --brand-light: 193 70% 95%;
  --brand-medium: 193 60% 85%;
}
```

**적용 규칙**
1. **강조/선택/진행** → `hsl(var(--brand))`
2. **배경 톤** → `hsl(var(--brand-light))`
3. **hover/그라데이션** → `hsl(var(--brand-medium))`
4. **그 외** → `slate-*`, `gray-*` 등 고정

### 2.3 적용 범위 일관성

| 화면 | 적용 요소 |
|------|-----------|
| 과목별 달성률 | 링 차트 stroke, 퍼센트 텍스트, 과목 아이콘 |
| 캘린더 | 선택일, 학습량 강도(10h/5h/2h), 범례, 주간보기 버튼 |
| 피드백 | NEW 뱃지, blockquote 테두리, 과제 보기 링크 |
| 과제 리스트 | 완료 태그, (아이콘 유지 시) 과목 아이콘 |
| 뱃지 | 획득 배경, glow |
| 학습 현황 | 프로그레스 바 |

---

## 3. 뱃지 선택 → 획득 화면 인터랙션

### 3.1 현재 구조

- `BadgeCelebrationOverlay`: **획득 시 자동** 트리거 (3초 후 자동 닫힘)
- `BadgeSection`: 클릭 핸들러 없음 → 클릭 시 아무 반응 없음

### 3.2 '뱃지 획득 화면'으로 만드는 방향

**목표**: 뱃지를 클릭했을 때 "성취 보상" 느낌의 전용 화면 노출

---

### 3.3 화면 전환 방식 제안

#### A안: 바텀 시트 (추천)

```
[뱃지 그리드 클릭]
     ↓
┌─────────────────────────────────────┐
│  [배경 딤] (backdrop-blur)           │
│  ┌─────────────────────────────┐   │
│  │                             │   │
│  │      [큰 뱃지 아이콘]        │   │
│  │      첫 과제 · 완료          │   │
│  │      "첫 번째 과제를 완료했어요!" │   │
│  │                             │   │
│  │  [닫기] or [확인]            │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

- **애니메이션**: 아래에서 위로 슬라이드 업 (`transform: translateY(100%) → 0`)
- **duration**: 280~350ms
- **닫기**: 아래로 스와이프 또는 딤 영역 탭

#### B안: 풀스크린 오버레이

```
[클릭] → 전체 화면 검정/흐림 → 중앙에 뱃지 확대 등장
```

- 스케일 인 + 페이드 인
- "획득" 시 스크래치 카드/롤오프 같은 느낌(선택)

#### C안: 카드 확장 (인라인)

```
[그리드 내 뱃지 클릭]
→ 해당 카드만 확장되어 상세 정보 표시
→ 나머지 그리드는 살짝 dim
```

- 모달보다 가벼운 느낌
- 상세 정보 위주일 때 적합

---

### 3.4 상태별 UX 차이

| 상태 | 클릭 시 동작 | 시각적 표현 |
|------|--------------|-------------|
| **획득** | 획득 화면 표시 (보상 연출) | 축하 문구, 뱃지 설명, "획득일" 등 |
| **잠김** | 획득 조건 안내 화면 | "7일 연속 출석하면 획득해요" + 진행률(선택) |
| **대표 뱃지** | 프로필 대표 뱃지 설정 또는 획득 화면 | 프로필에 노출되는 뱃지, 설정 옵션 |

#### 획득 상태 세부 사항

- **제목**: "첫 과제 · 완료"
- **설명**: "첫 번째 과제를 제출했어요! 멋져요."
- **시각**: 뱃지 아이콘 크게(80~100px), 은은한 glow
- **CTA**: "확인" 또는 "닫기"

#### 잠김 상태 세부 사항

- **제목**: "7일 연속 출석"
- **설명**: "7일 연속으로 출석하면 획득할 수 있어요"
- **진행률**(선택): "현재 3/7일"
- **시각**: 뱃지 실루엣(회색) + 자물쇠 또는 "?" 아이콘

#### 대표 뱃지

- "프로필에 보여줄 뱃지를 선택해요" 안내
- 획득한 뱃지 중 하나 선택 → 프로필 카드에 표시
- 별도 "대표 뱃지" 설정 UI 또는 획득 화면에서 "대표로 설정" 버튼

---

### 3.5 애니메이션·모션 제안

| 단계 | 동작 |
|------|------|
| **진입** | 바텀 시트 `translateY(100%) → 0` + `opacity 0 → 1` |
| **뱃지 등장** | `scale(0.8) → 1` + 약한 `bounce` (100ms delay) |
| **텍스트** | `opacity 0 → 1` (stagger 50ms) |
| **퇴장** | `translateY(0) → 100%` 또는 `opacity 1 → 0` |

**획득 직후 자동 팝업**과 **클릭 시 상세**를 구분:

- **자동**: 새로 획득한 뱃지 → 기존 `BadgeCelebrationOverlay` 유지 또는 통합
- **클릭**: 이미 획득/잠김 뱃지 → 바텀 시트 상세 화면

---

### 3.6 구현 단계 제안

| 순위 | 작업 | 설명 |
|------|------|------|
| 1 | `BadgeSection`에 `onClick` 연결 | 뱃지 클릭 시 상세 화면 열기 |
| 2 | `BadgeDetailSheet` 컴포넌트 | 바텀 시트, 획득/잠김 분기 |
| 3 | 획득 상태 콘텐츠 | 축하 문구, 뱃지 설명 |
| 4 | 잠김 상태 콘텐츠 | 조건 안내, 진행률(선택) |
| 5 | 애니메이션 정교화 | 진입/퇴장, stagger |
| 6 | 대표 뱃지 설정 | 별도 설정 또는 상세 화면 내 옵션 |

---

## 4. 요약

| 주제 | 핵심 제안 |
|------|-----------|
| **팔레트 위치** | 마이페이지 상단 테마 카드 + 설정 "컬러 테마" |
| **전역 적용** | `--brand`, `--brand-light`, `--brand-medium`만 교체 |
| **UI 안정성** | 배경·텍스트·테두리는 고정, 강조 요소만 색 변경 |
| **뱃지 클릭** | 바텀 시트로 획득/잠김 상세 화면 |
| **상태별 UX** | 획득→축하, 잠김→조건 안내, 대표→설정·선택 |
